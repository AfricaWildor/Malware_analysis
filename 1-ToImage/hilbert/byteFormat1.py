import time
import numpy as np

from PIL import Image, ImageDraw

import hilbert
from main import byte_match

bytes_list = b''


with open("0ACDbR5M3ZhBJajygTuf.bytes", mode="r") as f:
	for l in f:
		if l.find("?") >= 0:
			continue
		str_list = l.split(" ")[1:]
		b = bytes.fromhex("".join(str_list))
		bytes_list += b

# print(bytes_list)

n = 10
dim = 2 ** n

c = Image.new("L", (dim, dim))

id = ImageDraw.Draw(c)
# hc = hilbert.HilbertCurve(10)

arr = np.load("hilbert.npy")
st = time.time()

for i in range(dim):
	for j in range(dim):
		index = arr[i][j]
		if index < len(bytes_list):
			id.point((i, j), bytes_list[index])
		else:
			id.point((i, j), 255)

et = time.time()

c.save("./test.png")


print(et-st)